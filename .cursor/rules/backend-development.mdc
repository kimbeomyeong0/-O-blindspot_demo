# ë°±ì—”ë“œ ê°œë°œ ê°€ì´ë“œë¼ì¸

## ğŸ—ï¸ í”„ë¡œì íŠ¸ êµ¬ì¡°
- `apps/backend/app/`: FastAPI ì• í”Œë¦¬ì¼€ì´ì…˜
  - `api/`: API ì—”ë“œí¬ì¸íŠ¸
  - `core/`: í•µì‹¬ ì„¤ì • ë° ìœ í‹¸ë¦¬í‹°
  - `db/`: ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²° ë° í´ë¼ì´ì–¸íŠ¸
  - `models/`: ë°ì´í„° ëª¨ë¸ ì •ì˜
  - `services/`: ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ ì„œë¹„ìŠ¤

### ì„œë¹„ìŠ¤ ë ˆì´ì–´
- `services/`: ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ ë¶„ë¦¬
  - `article_service.py`: ê¸°ì‚¬ ê´€ë ¨ ì„œë¹„ìŠ¤
  - `crawler/`: í¬ë¡¤ëŸ¬ ê´€ë ¨ ì„œë¹„ìŠ¤
  - `cluster/`: í´ëŸ¬ìŠ¤í„°ë§ ì„œë¹„ìŠ¤
  - `generator/`: ì½˜í…ì¸  ìƒì„± ì„œë¹„ìŠ¤

## ğŸ—„ï¸ ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²°
- [supabase_client.py](mdc:apps/backend/app/db/supabase_client.py): Supabase ì—°ê²° ì„¤ì •
- [article.py](mdc:apps/backend/app/models/article.py): ê¸°ì‚¬ ëª¨ë¸
- Pydanticì„ ì‚¬ìš©í•œ ë°ì´í„° ê²€ì¦

## ğŸ”§ ê°œë°œ í™˜ê²½
- `python3` ì‚¬ìš© (python ëŒ€ì‹ )
- `pip3` ì‚¬ìš© (pip ëŒ€ì‹ )
- [requirements.txt](mdc:apps/backend/requirements.txt): í”„ë¡œì íŠ¸ ì˜ì¡´ì„±

## ğŸ“ ì½”ë”© ìŠ¤íƒ€ì¼

### 1. ë¹„ë™ê¸° ì²˜ë¦¬
```python
# âœ… ê¶Œì¥
async def get_articles(issue_id: str):
    articles = await db.articles.select().eq("issue_id", issue_id)
    return articles
```

### 2. ì—ëŸ¬ ì²˜ë¦¬
```python
# âœ… ê¶Œì¥
async def save_article(article_data: dict):
    try:
        result = await db.articles.insert(article_data)
        return result
    except Exception as e:
        logger.error(f"Failed to save article: {e}")
        raise
```

### 3. ë°ì´í„° ê²€ì¦
```python
# âœ… ê¶Œì¥
from pydantic import BaseModel

class ArticleCreate(BaseModel):
    title: str
    content: str
    url: str
    source: str
```

## ğŸš€ API ê°œë°œ

### ì—”ë“œí¬ì¸íŠ¸ êµ¬ì¡°
```python
# âœ… ê¶Œì¥
@router.get("/issues/{issue_id}/articles")
async def get_issue_articles(issue_id: str):
    articles = await article_service.get_articles_by_issue(issue_id)
    return {"articles": articles}
```

### ì„œë¹„ìŠ¤ ë ˆì´ì–´ ì‚¬ìš©
```python
# âœ… ê¶Œì¥
@router.post("/articles")
async def create_article(article: ArticleCreate):
    result = await article_service.create_article(article)
    return result
```

## ğŸ“Š ë°ì´í„° ì²˜ë¦¬

### ê¸°ì‚¬ ì €ì¥
```python
# âœ… ê¶Œì¥
async def save_articles(articles: List[dict]):
    for article in articles:
        await db.articles.insert(article)
    print(f"ğŸ’¾ Saved {len(articles)} articles")
```

### ì´ìŠˆ ìƒì„±
```python
# âœ… ê¶Œì¥
async def create_issue(issue_data: dict):
    issue = await db.issues.insert(issue_data)
    return issue
```

### í¸í–¥ ë¶„ì„
```python
# âœ… ê¶Œì¥
async def analyze_bias(articles: List[dict]):
    bias_counts = {"left": 0, "center": 0, "right": 0}
    for article in articles:
        bias = determine_bias(article)
        bias_counts[bias] += 1
    return bias_counts
```

## ğŸ” ë¡œê¹… ë° ë””ë²„ê¹…

### ë¡œê¹… ê·œì¹™
```python
# âœ… ê¶Œì¥
import logging
logger = logging.getLogger(__name__)

async def process_articles():
    logger.info("Starting article processing")
    # ì²˜ë¦¬ ë¡œì§
    logger.info("Article processing completed")
```

### ë””ë²„ê¹…
```python
# âœ… ê¶Œì¥
async def debug_article(article_id: str):
    article = await db.articles.select().eq("id", article_id).single()
    print(f"ğŸ” Debugging article: {article['title']}")
    return article
```

## ğŸ§ª í…ŒìŠ¤íŠ¸

### ë‹¨ìœ„ í…ŒìŠ¤íŠ¸
```python
# âœ… ê¶Œì¥
async def test_article_service():
    article_data = {"title": "Test", "content": "Test content"}
    result = await article_service.create_article(article_data)
    assert result["title"] == "Test"
```

### í†µí•© í…ŒìŠ¤íŠ¸
```python
# âœ… ê¶Œì¥
async def test_api_endpoint():
    response = await client.get("/api/articles")
    assert response.status_code == 200
```
