# ë°ì´í„°ë² ì´ìŠ¤ ìŠ¤í‚¤ë§ˆ ê°€ì´ë“œ

## ğŸ—„ï¸ í•µì‹¬ í…Œì´ë¸”

### issues (ì´ìŠˆ ë‹¨ìœ„)
```sql
-- ë‰´ìŠ¤ ì´ìŠˆ ì •ë³´ ì €ì¥ (ì¹´ë“œ í”¼ë“œ í•µì‹¬)
CREATE TABLE issues (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    title TEXT NOT NULL,                    -- GPT ìƒì„± ì œëª© (1~2ë¬¸ì¥)
    summary TEXT NOT NULL,                  -- GPT ê¸°ë°˜ ì¤‘ë¦½ì  ìš”ì•½
    image_url TEXT,                         -- ëŒ€í‘œ ì´ë¯¸ì§€
    bias_left_pct DECIMAL(5,2),            -- ì¢Œì„±í–¥ ê¸°ì‚¬ ë¹„ìœ¨
    bias_center_pct DECIMAL(5,2),          -- ì¤‘ì„±í–¥ ê¸°ì‚¬ ë¹„ìœ¨
    bias_right_pct DECIMAL(5,2),           -- ìš°ì„±í–¥ ê¸°ì‚¬ ë¹„ìœ¨
    dominant_bias TEXT,                     -- ìµœê³  ì„±í–¥ê°’
    source_count INTEGER DEFAULT 0,         -- ì—°ê²°ëœ ê¸°ì‚¬ ìˆ˜
    updated_at TIMESTAMP DEFAULT NOW()
);
```

### articles (ê°œë³„ ê¸°ì‚¬)
```sql
-- ê°œë³„ ë‰´ìŠ¤ ê¸°ì‚¬ (í¸í–¥ ë¶„ì„ ê¸°ë³¸ ë°ì´í„°)
CREATE TABLE articles (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    issue_id UUID REFERENCES issues(id),
    title TEXT NOT NULL,
    content TEXT NOT NULL,
    url TEXT NOT NULL,
    source TEXT NOT NULL,                   -- ì–¸ë¡ ì‚¬ëª…
    published_at TIMESTAMP,
    author TEXT,
    image_url TEXT,
    bias_analysis TEXT                      -- í¸í–¥ ë¶„ì„ ê²°ê³¼
);
```

### common_points (ê³µí†µ íŒ©íŠ¸)
```sql
-- ì¢Œìš° ì–¸ë¡  ê³µí†µ íŒ©íŠ¸ (Key Factsìš©)
CREATE TABLE common_points (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    issue_id UUID REFERENCES issues(id),
    point TEXT NOT NULL                     -- ê³µí†µ ì–¸ê¸‰ ë¬¸ì¥
);
```

### bias_summaries (ì„±í–¥ë³„ ìš”ì•½)
```sql
-- ì„±í–¥ë³„ ì´ìŠˆ ìš”ì•½ (ì¢Œ/ì¤‘/ìš° ê´€ì )
CREATE TABLE bias_summaries (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    issue_id UUID REFERENCES issues(id),
    bias TEXT NOT NULL,                     -- ì„±í–¥ (left/center/right)
    summary_list JSONB                      -- bullet í˜•íƒœ ìš”ì•½
);
```

## ğŸ”— í…Œì´ë¸” ê´€ê³„
```
issues (1) â†â†’ (N) articles
    â†“
    â”œâ”€â”€ (1:N) common_points
    â”œâ”€â”€ (1:N) bias_summaries
    â”œâ”€â”€ (1:N) reactions
    â””â”€â”€ (1:N) bookmarks
```

## ğŸ“Š ë°ì´í„° ìƒì„± í”„ë¡œì„¸ìŠ¤

### 1. ì´ìŠˆ í´ëŸ¬ìŠ¤í„°ë§
- ìœ ì‚¬í•œ ê¸°ì‚¬ë“¤ì„ ì´ìŠˆë¡œ ê·¸ë£¹í™”
- GPTë¡œ ì´ìŠˆ ì œëª©ê³¼ ìš”ì•½ ìƒì„±
- í¸í–¥ ë¹„ìœ¨ ê³„ì‚° (ì¢Œ/ì¤‘/ìš° ê¸°ì‚¬ ìˆ˜ ê¸°ë°˜)

### 2. ê³µí†µì  ì¶”ì¶œ
- ì¢Œìš° ê¸°ì‚¬ 1~2ê°œì”© ìƒ˜í”Œë§ â†’ GPTë¡œ ê³µí†µì  ì¶”ì¶œ
- `common_points` í…Œì´ë¸”ì— ì €ì¥

### 3. ì„±í–¥ë³„ ìš”ì•½ ìƒì„±
- í•´ë‹¹ bias ì„±í–¥ ê¸°ì‚¬ 2~3ê°œ ìƒ˜í”Œë§
- GPTë¡œ í•´ë‹¹ ì„±í–¥ ì‹œê° ìš”ì•½ â†’ bullet í˜•íƒœë¡œ ì €ì¥

## ğŸ’¾ ë°ì´í„° ì €ì¥ ê·œì¹™

### ê¹”ë”í•œ ì €ì¥ ì½”ë“œ
```python
# âœ… ê¶Œì¥
async def save_articles(articles: List[Article]):
    for article in articles:
        await db.articles.insert(article.dict())
    print(f"ğŸ’¾ Saved {len(articles)} articles")
```

### ë¶ˆí•„ìš”í•œ ë¡œê·¸ ì œê±°
```python
# âŒ í”¼í•´ì•¼ í•  ë°©ì‹
print(f"HTTP Request: POST /api/articles")
print(f"Database: Inserting article with ID {article_id}")
```

## ğŸ” ì£¼ìš” ì¿¼ë¦¬ íŒ¨í„´

### ì´ìŠˆë³„ ê¸°ì‚¬ ì¡°íšŒ
```sql
SELECT a.*, i.title as issue_title 
FROM articles a 
JOIN issues i ON a.issue_id = i.id 
WHERE i.id = $1;
```

### í¸í–¥ë³„ ìš”ì•½ ì¡°íšŒ
```sql
SELECT bs.* 
FROM bias_summaries bs 
WHERE bs.issue_id = $1 AND bs.bias = $2;
```
