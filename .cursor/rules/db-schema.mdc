# blindspot_demo 프로젝트 DB 구조 및 작업 가이드

- 이 프로젝트는 **Supabase**를 메인 데이터베이스로 사용합니다.
- DB 작업(크롤러, API, 서비스 등) 시 아래 테이블/컬럼 구조를 반드시 참고하세요.
- 주요 테이블 및 컬럼 정보:

## articles 테이블
| 컬럼명         | 타입                        | 필수 | 기본값             | 설명                |
| -------------- | -------------------------- | ---- | ------------------ | ------------------- |
| id             | uuid                       | Y    | gen_random_uuid()  | PK                  |
| issue_id       | uuid                       | N    |                    | 이슈 FK             |
| media_id       | uuid                       | N    |                    | 언론사 FK           |
| title          | text                       | Y    |                    | 기사 제목           |
| content_full   | text                       | N    |                    | 기사 전체 본문      |
| url            | text                       | Y    |                    | 기사 URL (unique)   |
| bias           | text                       | Y    |                    | 편향 정보           |
| category       | text                       | N    |                    | 카테고리            |
| published_at   | timestamp                  | N    |                    | 발행일              |
| author         | text                       | N    |                    | 기자명              |
| image_url      | text                       | N    |                    | 대표 이미지         |

## bias_summaries 테이블
| 컬럼명         | 타입                        | 필수 | 기본값             |
| -------------- | -------------------------- | ---- | ------------------ |
| id             | uuid                       | Y    | gen_random_uuid()  |
| issue_id       | uuid                       | N    |                    |
| bias           | text                       | Y    |                    |
| summary_list   | jsonb                      | Y    |                    |

## bookmarks 테이블
| 컬럼명         | 타입                        | 필수 | 기본값             |
| -------------- | -------------------------- | ---- | ------------------ |
| user_id        | uuid                       | Y    |                    |
| issue_id       | uuid                       | Y    |                    |
| created_at     | timestamp                  | N    | now()              |

## common_points 테이블
| 컬럼명         | 타입                        | 필수 | 기본값             |
| -------------- | -------------------------- | ---- | ------------------ |
| id             | uuid                       | Y    | gen_random_uuid()  |
| issue_id       | uuid                       | N    |                    |
| point          | text                       | Y    |                    |

## issues 테이블
| 컬럼명             | 타입                | 필수 | 기본값             |
| ------------------ | -------------------| ---- | ------------------ |
| id                 | uuid               | Y    | gen_random_uuid()  |
| title              | text               | Y    |                    |
| summary            | text               | Y    |                    |
| image_url          | text               | N    |                    |
| image_swipe_url    | text               | N    |                    |
| bias_left_pct      | double precision   | N    | 0                  |
| bias_center_pct    | double precision   | N    | 0                  |
| bias_right_pct     | double precision   | N    | 0                  |
| dominant_bias      | text               | N    |                    |
| source_count       | integer            | N    | 0                  |
| updated_at         | timestamp          | N    | now()              |

## media_outlets 테이블
| 컬럼명         | 타입                        | 필수 | 기본값             |
| -------------- | -------------------------- | ---- | ------------------ |
| id             | uuid                       | Y    | gen_random_uuid()  |
| name           | text                       | Y    |                    |
| bias           | text                       | Y    |                    |
| logo_url       | text                       | N    |                    |

## reactions 테이블
| 컬럼명         | 타입                        | 필수 | 기본값             |
| -------------- | -------------------------- | ---- | ------------------ |
| id             | uuid                       | Y    | gen_random_uuid()  |
| issue_id       | uuid                       | N    |                    |
| likes          | integer                    | N    | 0                  |
| comments       | integer                    | N    | 0                  |
| views          | integer                    | N    | 0                  |

---

- **articles.url** 컬럼은 unique constraint가 걸려 있으니 중복 저장에 주의하세요.
- FK 컬럼(issue_id, media_id 등)은 관련 테이블의 uuid를 참조합니다.
- bias, category 등은 텍스트로 저장됩니다.
- DB 작업 시 컬럼 타입, 필수 여부, 기본값을 반드시 확인하세요.
- DB 구조가 변경될 경우 이 Rule을 반드시 업데이트하세요.
description:
globs:
alwaysApply: false
---
